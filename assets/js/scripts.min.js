!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";function t(t,e){this.el=t,this.options=e=e||{};var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1};for(var i in o)!(i in e)&&(e[i]=o[i]);var a=e.group;a&&"object"==typeof a||(a=e.group={name:a}),["pull","put"].forEach(function(t){t in a||(a[t]=!0)}),k.forEach(function(o){e[o]=n(this,e[o]||U),r(t,o.substr(2).toLowerCase(),e[o])},this),t[O]=a.name+" "+(a.put.join?a.put.join(" "):"");for(var s in this)"_"===s.charAt(0)&&(this[s]=n(this,this[s]));r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),Y&&r(t,"selectstart",this._onTapStart),r(t,"dragover",this._onDragOver),r(t,"dragenter",this._onDragOver),j.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){_&&_.state!==t&&(l(_,"display",t?"none":""),!t&&_.state&&b.insertBefore(_,v),_.state=t)}function n(t,e){var n=W.call(arguments,2);return e.bind?e.bind.apply(e,[t].concat(n)):function(){return e.apply(t,n.concat(W.call(arguments)))}}function o(t,e,n){if(t){n=n||I,e=e.split(".");var o=e.shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")\\s","g");do if(">*"===o&&t.parentNode===n||(""===o||t.nodeName.toUpperCase()==o)&&(!e.length||((" "+t.className+" ").match(i)||[]).length==e.length))return t;while(t!==n&&(t=t.parentNode))}return null}function i(t){t.dataTransfer.dropEffect="move",t.preventDefault()}function r(t,e,n){t.addEventListener(e,n,!1)}function a(t,e,n){t.removeEventListener(e,n,!1)}function s(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(/\s+/g," ").replace(" "+e+" ","");t.className=o+(n?" "+e:"")}}function l(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return I.defaultView&&I.defaultView.getComputedStyle?n=I.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function d(t,e,n){if(t){var o=t.getElementsByTagName(e),i=0,r=o.length;if(n)for(;r>i;i++)n(o[i],i);return o}return[]}function c(t){t.draggable=!1}function h(){X=!1}function f(t,e){var n=t.lastElementChild,o=n.getBoundingClientRect();return e.clientY-(o.top+o.height)>5&&n}function u(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function p(t){for(var e=0;t&&(t=t.previousElementSibling)&&"TEMPLATE"!==t.nodeName.toUpperCase();)e++;return e}function g(t,e){var n,o;return function(){void 0===n&&(n=arguments,o=this,setTimeout(function(){1===n.length?t.call(o,n[0]):t.apply(o,n),n=void 0},e))}}var v,m,_,b,D,y,S,w,C,E,T,x,N,B={},O="Sortable"+(new Date).getTime(),A=window,I=A.document,R=A.parseInt,Y=!!I.createElement("div").dragDrop,X=!1,L=function(t,e,n,o,i,r){var a=I.createEvent("Event");a.initEvent(e,!0,!0),a.item=n||t,a.from=o||t,a.clone=_,a.oldIndex=i,a.newIndex=r,t.dispatchEvent(a)},k="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),U=function(){},M=Math.abs,W=[].slice,j=[];return t.prototype={constructor:t,_dragStarted:function(){s(v,this.options.ghostClass,!0),t.active=this,L(b,"start",v,b,C)},_onTapStart:function(t){var e=t.type,n=t.touches&&t.touches[0],i=(n||t).target,a=i,s=this.options,l=this.el,h=s.filter;if(!("mousedown"===e&&0!==t.button||s.disabled)){if(s.handle&&(i=o(i,s.handle,l)),i=o(i,s.draggable,l),C=p(i),"function"==typeof h){if(h.call(this,t,i,this))return L(a,"filter",i,l,C),void t.preventDefault()}else if(h&&(h=h.split(",").some(function(t){return t=o(a,t.trim(),l),t?(L(t,"filter",i,l,C),!0):void 0})))return void t.preventDefault();if(i&&!v&&i.parentNode===l){"selectstart"===e&&i.dragDrop(),x=t,b=this.el,v=i,y=v.nextSibling,T=this.options.group,v.draggable=!0,s.ignore.split(",").forEach(function(t){d(i,t.trim(),c)}),n&&(x={target:i,clientX:n.clientX,clientY:n.clientY},this._onDragStart(x,!0),t.preventDefault()),r(I,"mouseup",this._onDrop),r(I,"touchend",this._onDrop),r(I,"touchcancel",this._onDrop),r(v,"dragend",this),r(b,"dragstart",this._onDragStart),r(I,"dragover",this);try{I.selection?I.selection.empty():window.getSelection().removeAllRanges()}catch(f){}}}},_emulateDragOver:function(){if(N){l(m,"display","none");var t=I.elementFromPoint(N.clientX,N.clientY),e=t,n=this.options.group.name,o=j.length;if(e)do{if((" "+e[O]+" ").indexOf(n)>-1){for(;o--;)j[o]({clientX:N.clientX,clientY:N.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);l(m,"display","")}},_onTouchMove:function(t){if(x){var e=t.touches[0],n=e.clientX-x.clientX,o=e.clientY-x.clientY,i="translate3d("+n+"px,"+o+"px,0)";N=e,l(m,"webkitTransform",i),l(m,"mozTransform",i),l(m,"msTransform",i),l(m,"transform",i),this._onDrag(e),t.preventDefault()}},_onDragStart:function(t,e){var n=t.dataTransfer,o=this.options;if(this._offUpEvents(),"clone"==T.pull&&(_=v.cloneNode(!0),l(_,"display","none"),b.insertBefore(_,v)),e){var i,a=v.getBoundingClientRect(),s=l(v);m=v.cloneNode(!0),l(m,"top",a.top-R(s.marginTop,10)),l(m,"left",a.left-R(s.marginLeft,10)),l(m,"width",a.width),l(m,"height",a.height),l(m,"opacity","0.8"),l(m,"position","fixed"),l(m,"zIndex","100000"),b.appendChild(m),i=m.getBoundingClientRect(),l(m,"width",2*a.width-i.width),l(m,"height",2*a.height-i.height),r(I,"touchmove",this._onTouchMove),r(I,"touchend",this._onDrop),r(I,"touchcancel",this._onDrop),this._loopId=setInterval(this._emulateDragOver,150)}else n&&(n.effectAllowed="move",o.setData&&o.setData.call(this,n,v)),r(I,"drop",this);if(D=o.scroll,D===!0){D=b;do if(D.offsetWidth<D.scrollWidth||D.offsetHeight<D.scrollHeight)break;while(D=D.parentNode)}setTimeout(this._dragStarted,0)},_onDrag:g(function(t){if(b&&this.options.scroll){var e,n,o=this.options,i=o.scrollSensitivity,r=o.scrollSpeed,a=t.clientX,s=t.clientY,l=window.innerWidth,d=window.innerHeight,c=(i>=l-a)-(i>=a),h=(i>=d-s)-(i>=s);c||h?e=A:D&&(e=D,n=D.getBoundingClientRect(),c=(M(n.right-a)<=i)-(M(n.left-a)<=i),h=(M(n.bottom-s)<=i)-(M(n.top-s)<=i)),(B.vx!==c||B.vy!==h||B.el!==e)&&(B.el=e,B.vx=c,B.vy=h,clearInterval(B.pid),e&&(B.pid=setInterval(function(){e===A?A.scrollTo(A.scrollX+c*r,A.scrollY+h*r):(h&&(e.scrollTop+=h*r),c&&(e.scrollLeft+=c*r))},24)))}},30),_onDragOver:function(t){var n,i,r,a=this.el,s=this.options,d=s.group,c=d.put,u=T===d,p=s.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!s.dragoverBubble&&t.stopPropagation()),!X&&T&&(u?p||(r=!b.contains(v)):T.pull&&c&&(T.name===d.name||c.indexOf&&~c.indexOf(T.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(n=o(t.target,s.draggable,a),i=v.getBoundingClientRect(),r)return e(!0),void(_||y?b.insertBefore(v,_||y):p||b.appendChild(v));if(0===a.children.length||a.children[0]===m||a===t.target&&(n=f(a,t))){if(n){if(n.animated)return;D=n.getBoundingClientRect()}e(u),a.appendChild(v),this._animate(i,v),n&&this._animate(D,n)}else if(n&&!n.animated&&n!==v&&void 0!==n.parentNode[O]){S!==n&&(S=n,w=l(n));var g,D=n.getBoundingClientRect(),C=D.right-D.left,E=D.bottom-D.top,x=/left|right|inline/.test(w.cssFloat+w.display),N=n.offsetWidth>v.offsetWidth,B=n.offsetHeight>v.offsetHeight,A=(x?(t.clientX-D.left)/C:(t.clientY-D.top)/E)>.5,I=n.nextElementSibling;X=!0,setTimeout(h,30),e(u),g=x?n.previousElementSibling===v&&!N||A&&N:I!==v&&!B||A&&B,g&&!I?a.appendChild(v):n.parentNode.insertBefore(v,g?I:n),this._animate(i,v),this._animate(D,n)}}},_animate:function(t,e){var n=this.options.animation;if(n){var o=e.getBoundingClientRect();l(e,"transition","none"),l(e,"transform","translate3d("+(t.left-o.left)+"px,"+(t.top-o.top)+"px,0)"),e.offsetWidth,l(e,"transition","all "+n+"ms"),l(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){l(e,"transition",""),e.animated=!1},n)}},_offUpEvents:function(){a(I,"mouseup",this._onDrop),a(I,"touchmove",this._onTouchMove),a(I,"touchend",this._onDrop),a(I,"touchcancel",this._onDrop)},_onDrop:function(e){var n=this.el,o=this.options;clearInterval(this._loopId),clearInterval(B.pid),a(I,"drop",this),a(I,"dragover",this),a(n,"dragstart",this._onDragStart),this._offUpEvents(),e&&(e.preventDefault(),!o.dropBubble&&e.stopPropagation(),m&&m.parentNode.removeChild(m),v&&(a(v,"dragend",this),c(v),s(v,this.options.ghostClass,!1),b!==v.parentNode?(E=p(v),L(v.parentNode,"sort",v,b,C,E),L(b,"sort",v,b,C,E),L(v,"add",v,b,C,E),L(b,"remove",v,b,C,E)):(_&&_.parentNode.removeChild(_),v.nextSibling!==y&&(E=p(v),L(b,"update",v,b,C,E),L(b,"sort",v,b,C,E))),t.active&&L(b,"end",v,b,C,E)),b=v=m=y=_=x=N=S=w=T=t.active=null,this.save())},handleEvent:function(t){var e=t.type;"dragover"===e?(this._onDrag(t),i(t)):("drop"===e||"dragend"===e)&&this._onDrop(t)},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length;r>i;i++)t=n[i],o(t,this.options.draggable,this.el)&&e.push(t.getAttribute("data-id")||u(t));return e},sort:function(t){var e={},n=this.el;this.toArray().forEach(function(t,i){var r=n.children[i];o(r,this.options.draggable,n)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(n.removeChild(e[t]),n.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return o(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;return void 0===e?n[t]:void(n[t]=e)},destroy:function(){var t=this.el,e=this.options;k.forEach(function(n){a(t,n.substr(2).toLowerCase(),e[n])}),a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),a(t,"selectstart",this._onTapStart),a(t,"dragover",this._onDragOver),a(t,"dragenter",this._onDragOver),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),j.splice(j.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},t.utils={on:r,off:a,css:l,find:d,bind:n,is:function(t,e){return!!o(t,e,t)},throttle:g,closest:o,toggleClass:s,dispatchEvent:L,index:p},t.version="1.0.1",t.create=function(e,n){return new t(e,n)},t}),function(){Sortable.create(markersContainer,{handle:".marker-tracker",animation:150})}(jQuery);